# 程序介绍
Telegram bot_settings 付费进群机器人

一个方便部署的 PHP 自动收费进群机器人，当用户付费后通过群聊地址加入时，机器人会判断加入人员是否付费，如付费则通过入群申请，如未付费则通过机器人通知付费入群，加入人员订阅到期后群内机器人通知后自动踢人，支付接口目前只对接了易支付

# 程序特性
1、使用易支付通用接口

2、使用 PHP（7.2、7.4） + Mysql（5.7） 开发

3、机器人监控群组进群状态，如付费则通过入群申请，如未付费则通过机器人通知付费入群，加入人员订阅到期后群内机器人通知后自动踢人

# 使用说明
新手建议通过宝塔面板部署，因为需要设置计划任务，新手可能会设置错误

将程序上传服务器，修改根目录数据库文件 config.php，导入 SQL 数据库文件

```
// 数据库配置
define('DB_HOST', 'localhost');
define('DB_NAME', '库名');
define('DB_USER', '用户');
define('DB_PASS', '密码');
```

注意需要添加 域名 并部署 SSL 加密证书，切记！！！

上传并配置好数据库后，通过 https://example.com/admin 访问后台地址，并进行设置

```
默认账号：admin@qq.com
默认密码：123456
```

进入后台将 商户密钥 填写完成，并进行设置机器人 Token 和 相关链接 就算是完成了

```
群组ID获取：https://api.telegram.org/bot + 机器人Token +/getUpdates

群组的邀请链接获取：管理群组 - 邀请链接 - 永久链接

机器人自身的链接地址：https://t.me/name_bot
```

以上全部设置完成后就需要设置定时任务了，如果使用宝塔面板，就在计划任务内添加任务，如下：

```
任务名称：过期会员检测
执行周期：N分钟 + 30分钟
URL地址：/web site/api/jiance.php
开启进程锁：勾选开启
```

然后启动机器人即可完成了

# 支付说明
使用通用易支付接口 [paypaynow](https://www.paypaynow.net/doc.html) 可前去进行开户

目前在 Telegram 内显示支付方式为 支付宝 + 微信 二维码的模式

如有问题请联系 [@gaojima](https://t.me/gaojima) 继续沟通
